"use strict";(self.webpackChunkdev_portal_docsite=self.webpackChunkdev_portal_docsite||[]).push([[23791],{15680:(e,t,n)=>{n.d(t,{xA:()=>p,yg:()=>h});var a=n(96540);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},g="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,l=e.originalType,s=e.parentName,p=r(e,["components","mdxType","originalType","parentName"]),g=c(n),d=i,h=g["".concat(s,".").concat(d)]||g[d]||m[d]||l;return n?a.createElement(h,o(o({ref:t},p),{},{components:n})):a.createElement(h,o({ref:t},p))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var l=n.length,o=new Array(l);o[0]=d;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r[g]="string"==typeof e?e:i,o[1]=r;for(var c=2;c<l;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},63413:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>m,frontMatter:()=>l,metadata:()=>r,toc:()=>c});var a=n(58168),i=(n(96540),n(15680));const l={title:"Concepts",sidebar_label:"Concepts",sidebar_position:2,slug:"/ibc/light-clients/wasm/concepts"},o="Concepts",r={unversionedId:"docs/light-clients/wasm/concepts",id:"docs/light-clients/wasm/concepts",title:"Concepts",description:"Learn about the differences between a proxy light client and a Wasm light client.",source:"@site/ibc-go/docs/03-light-clients/04-wasm/02-concepts.md",sourceDirName:"docs/03-light-clients/04-wasm",slug:"/ibc/light-clients/wasm/concepts",permalink:"/dev-portal-docsite/ibc-go/next/ibc/light-clients/wasm/concepts",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Concepts",sidebar_label:"Concepts",sidebar_position:2,slug:"/ibc/light-clients/wasm/concepts"},sidebar:"defaultSidebar",previous:{title:"Overview",permalink:"/dev-portal-docsite/ibc-go/next/ibc/light-clients/wasm/overview"},next:{title:"Integration",permalink:"/dev-portal-docsite/ibc-go/next/ibc/light-clients/wasm/integration"}},s={},c=[{value:"Proxy light client",id:"proxy-light-client",level:2},{value:"<code>LightClientModule</code>",id:"lightclientmodule",level:3},{value:"<code>ClientState</code>",id:"clientstate",level:3},{value:"<code>ConsensusState</code>",id:"consensusstate",level:3},{value:"<code>ClientMessage</code>",id:"clientmessage",level:3},{value:"Wasm light client",id:"wasm-light-client",level:2}],p={toc:c},g="wrapper";function m(e){let{components:t,...n}=e;return(0,i.yg)(g,(0,a.A)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.yg)("h1",{id:"concepts"},"Concepts"),(0,i.yg)("p",null,"Learn about the differences between a proxy light client and a Wasm light client. "),(0,i.yg)("h2",{id:"proxy-light-client"},"Proxy light client"),(0,i.yg)("p",null,"The ",(0,i.yg)("inlineCode",{parentName:"p"},"08-wasm")," module is not a regular light client in the same sense as, for example, the 07-tendermint light client. ",(0,i.yg)("inlineCode",{parentName:"p"},"08-wasm")," is instead a ",(0,i.yg)("em",{parentName:"p"},"proxy")," light client module, and this means that the module acts a proxy to the actual implementations of light clients. The module will act as a wrapper for the actual light clients uploaded as Wasm byte code and will delegate all operations to them (i.e. ",(0,i.yg)("inlineCode",{parentName:"p"},"08-wasm")," just passes through the requests to the Wasm light clients). Still, the ",(0,i.yg)("inlineCode",{parentName:"p"},"08-wasm")," module implements all the required interfaces necessary to integrate with core IBC, so that 02-client can call into it as it would for any other light client module. These interfaces are ",(0,i.yg)("inlineCode",{parentName:"p"},"LightClientModule"),", ",(0,i.yg)("inlineCode",{parentName:"p"},"ClientState"),", ",(0,i.yg)("inlineCode",{parentName:"p"},"ConsensusState")," and ",(0,i.yg)("inlineCode",{parentName:"p"},"ClientMessage"),", and we will describe them in the context of ",(0,i.yg)("inlineCode",{parentName:"p"},"08-wasm")," in the following sections. For more information about this set of interfaces, please read section ",(0,i.yg)("a",{parentName:"p",href:"/dev-portal-docsite/ibc-go/next/ibc/light-clients/overview#overview"},"Overview of the light client module developer guide"),"."),(0,i.yg)("h3",{id:"lightclientmodule"},(0,i.yg)("inlineCode",{parentName:"h3"},"LightClientModule")),(0,i.yg)("p",null,"The ",(0,i.yg)("inlineCode",{parentName:"p"},"08-wasm"),"'s ",(0,i.yg)("inlineCode",{parentName:"p"},"LightClientModule")," data structure contains two fields:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"keeper")," is the ",(0,i.yg)("inlineCode",{parentName:"li"},"08-wasm")," module keeper."),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"storeProvider")," encapsulates the IBC core store key and provides access to isolated prefix stores for each client so they can read/write in separate namespaces.")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-go"},"type LightClientModule struct {\n  keeper        wasmkeeper.Keeper\n  storeProvider exported.ClientStoreProvider\n}\n")),(0,i.yg)("p",null,"See section ",(0,i.yg)("a",{parentName:"p",href:"/dev-portal-docsite/ibc-go/next/ibc/light-clients/overview#lightclientmodule"},(0,i.yg)("inlineCode",{parentName:"a"},"LightClientModule")," of the light client module developer guide")," for more information about the ",(0,i.yg)("inlineCode",{parentName:"p"},"LightClientModule")," interface."),(0,i.yg)("h3",{id:"clientstate"},(0,i.yg)("inlineCode",{parentName:"h3"},"ClientState")),(0,i.yg)("p",null,"The ",(0,i.yg)("inlineCode",{parentName:"p"},"08-wasm"),"'s ",(0,i.yg)("inlineCode",{parentName:"p"},"ClientState")," data structure contains three fields:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"Data")," contains the bytes of the Protobuf-encoded client state of the underlying light client implemented as a Wasm contract. For example, if the Wasm light client contract implements the GRANDPA light client algorithm, then ",(0,i.yg)("inlineCode",{parentName:"li"},"Data")," will contain the bytes for a ",(0,i.yg)("a",{parentName:"li",href:"https://github.com/ComposableFi/composable-ibc/blob/02ce69e2843e7986febdcf795f69a757ce569272/light-clients/ics10-grandpa/src/proto/grandpa.proto#L35-L60"},"GRANDPA client state"),"."),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"Checksum")," is the sha256 hash of the Wasm contract's byte code. This hash is used as an identifier to call the right contract."),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"LatestHeight")," is the latest height of the counterparty state machine (i.e. the height of the blockchain), whose consensus state the light client tracks.")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-go"},"type ClientState struct {\n  // bytes encoding the client state of the underlying \n  // light client implemented as a Wasm contract\n  Data         []byte\n  // sha256 hash of Wasm contract byte code\n  Checksum     []byte\n  // latest height of the counterparty ledger\n  LatestHeight types.Height\n}\n")),(0,i.yg)("p",null,"See section ",(0,i.yg)("a",{parentName:"p",href:"/dev-portal-docsite/ibc-go/next/ibc/light-clients/overview#clientstate"},(0,i.yg)("inlineCode",{parentName:"a"},"ClientState")," of the light client module developer guide")," for more information about the ",(0,i.yg)("inlineCode",{parentName:"p"},"ClientState")," interface."),(0,i.yg)("h3",{id:"consensusstate"},(0,i.yg)("inlineCode",{parentName:"h3"},"ConsensusState")),(0,i.yg)("p",null,"The ",(0,i.yg)("inlineCode",{parentName:"p"},"08-wasm"),"'s ",(0,i.yg)("inlineCode",{parentName:"p"},"ConsensusState")," data structure maintains one field:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"Data")," contains the bytes of the Protobuf-encoded consensus state of the underlying light client implemented as a Wasm contract. For example, if the Wasm light client contract implements the GRANDPA light client algorithm, then ",(0,i.yg)("inlineCode",{parentName:"li"},"Data")," will contain the bytes for a ",(0,i.yg)("a",{parentName:"li",href:"https://github.com/ComposableFi/composable-ibc/blob/02ce69e2843e7986febdcf795f69a757ce569272/light-clients/ics10-grandpa/src/proto/grandpa.proto#L87-L94"},"GRANDPA consensus state"),".")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-go"},"type ConsensusState struct {\n  // bytes encoding the consensus state of the underlying light client\n  // implemented as a Wasm contract.\n  Data []byte\n}\n")),(0,i.yg)("p",null,"See section ",(0,i.yg)("a",{parentName:"p",href:"/dev-portal-docsite/ibc-go/next/ibc/light-clients/overview#consensusstate"},(0,i.yg)("inlineCode",{parentName:"a"},"ConsensusState")," of the light client module developer guide")," for more information about the ",(0,i.yg)("inlineCode",{parentName:"p"},"ConsensusState")," interface."),(0,i.yg)("h3",{id:"clientmessage"},(0,i.yg)("inlineCode",{parentName:"h3"},"ClientMessage")),(0,i.yg)("p",null,(0,i.yg)("inlineCode",{parentName:"p"},"ClientMessage")," is used for performing updates to a ",(0,i.yg)("inlineCode",{parentName:"p"},"ClientState")," stored on chain. The ",(0,i.yg)("inlineCode",{parentName:"p"},"08-wasm"),"'s ",(0,i.yg)("inlineCode",{parentName:"p"},"ClientMessage")," data structure maintains one field:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"Data")," contains the bytes of the Protobuf-encoded header(s) or misbehaviour for the underlying light client implemented as a Wasm contract. For example, if the Wasm light client  contract implements the GRANDPA light client algorithm, then ",(0,i.yg)("inlineCode",{parentName:"li"},"Data")," will contain the bytes of either ",(0,i.yg)("a",{parentName:"li",href:"https://github.com/ComposableFi/composable-ibc/blob/02ce69e2843e7986febdcf795f69a757ce569272/light-clients/ics10-grandpa/src/proto/grandpa.proto#L96-L104"},"header")," or ",(0,i.yg)("a",{parentName:"li",href:"https://github.com/ComposableFi/composable-ibc/blob/02ce69e2843e7986febdcf795f69a757ce569272/light-clients/ics10-grandpa/src/proto/grandpa.proto#L106-L112"},"misbehaviour")," for a GRANDPA light client.")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-go"},"type ClientMessage struct {\n  // bytes encoding the header(s) or misbehaviour for the underlying light client\n  // implemented as a Wasm contract.\n  Data []byte\n}\n")),(0,i.yg)("p",null,"See section ",(0,i.yg)("a",{parentName:"p",href:"/dev-portal-docsite/ibc-go/next/ibc/light-clients/overview#clientmessage"},(0,i.yg)("inlineCode",{parentName:"a"},"ClientMessage")," of the light client module developer guide")," for more information about the ",(0,i.yg)("inlineCode",{parentName:"p"},"ClientMessage")," interface."),(0,i.yg)("h2",{id:"wasm-light-client"},"Wasm light client"),(0,i.yg)("p",null,"The actual light client can be implemented in any language that compiles to Wasm and implements the interfaces of a ",(0,i.yg)("a",{parentName:"p",href:"https://docs.cosmwasm.com/docs/"},"CosmWasm")," contract. Even though in theory other languages could be used, in practice (at least for the time being) the most suitable language to use would be Rust, since there is already good support for it for developing CosmWasm smart contracts."),(0,i.yg)("p",null,"At the moment of writing there are two contracts available: one for ",(0,i.yg)("a",{parentName:"p",href:"https://github.com/ComposableFi/composable-ibc/tree/master/light-clients/ics07-tendermint-cw"},"Tendermint")," and one ",(0,i.yg)("a",{parentName:"p",href:"https://github.com/ComposableFi/composable-ibc/tree/master/light-clients/ics10-grandpa-cw"},"GRANDPA")," (which is being used in production in ",(0,i.yg)("a",{parentName:"p",href:"https://github.com/ComposableFi/composable-ibc"},"Composable Finance's Centauri bridge"),"). And there are others in development (e.g. for Near)."))}m.isMDXComponent=!0}}]);