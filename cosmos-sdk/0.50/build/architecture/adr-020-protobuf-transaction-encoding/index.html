<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-0.50 plugin-docs plugin-id-cosmos-sdk docs-doc-id-build/architecture/adr-020-protobuf-transaction-encoding" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">ADR 020: Protocol Buffer Transaction Encoding | Interchain Stack</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs-interchain.io/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-020-protobuf-transaction-encoding"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="0.50"><meta data-rh="true" name="docusaurus_tag" content="docs-cosmos-sdk-0.50"><meta data-rh="true" name="docsearch:version" content="0.50"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-cosmos-sdk-0.50"><meta data-rh="true" property="og:title" content="ADR 020: Protocol Buffer Transaction Encoding | Interchain Stack"><meta data-rh="true" name="description" content="Changelog"><meta data-rh="true" property="og:description" content="Changelog"><link data-rh="true" rel="icon" href="/dev-portal-docsite/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs-interchain.io/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-020-protobuf-transaction-encoding"><link data-rh="true" rel="alternate" href="https://docs-interchain.io/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-020-protobuf-transaction-encoding" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs-interchain.io/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-020-protobuf-transaction-encoding" hreflang="x-default"><script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="be413c15-3002-497e-9e30-676ea0039a9e" data-project-name="InterchainStack" data-project-color="#FFFFFF" data-button-text-color="#000" data-submit-query-button-bg-color="#000000" data-modal-disclaimer="InterchainGPT is a fine-tuned LLM for the Interchain with access to Interchain Stack developer documentation and resources. Please note that answers are generated by an AI so please use your best judgement before implementing" data-modal-image="img/spirograph.svg" data-project-logo="img/spirograph.svg" data-user-analytics-fingerprint-enabled="true" async></script><link rel="stylesheet" href="/dev-portal-docsite/assets/css/styles.3411b2aa.css">
<link rel="preload" href="/dev-portal-docsite/assets/js/runtime~main.e260afe7.js" as="script">
<link rel="preload" href="/dev-portal-docsite/assets/js/main.175a359f.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#20232a;color:#fff" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">The Interchain Stack Docsite is in MVP state; please submit comments with the feedback button. The Ask AI button is also very powerful.</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/dev-portal-docsite/"><div class="navbar__logo"><img src="/dev-portal-docsite/img/interchain_logo.svg" alt="Interchain Docs" class="themedImage_ToTc themedImage--light_HNdA"><img src="/dev-portal-docsite/img/interchain_logo.svg" alt="Interchain Docs" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" href="/dev-portal-docsite/onboarding">Onboarding</a><a class="navbar__item navbar__link" href="/dev-portal-docsite/ibc-go">IBC-Go</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/dev-portal-docsite/cosmos-sdk/learn">CosmosSDK</a><a href="https://docs.cometbft.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">CometBFT</a><a href="https://docs.cosmwasm.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">CosmWasm</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/dev-portal-docsite/cosmos-sdk/0.50/learn/">0.50</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/dev-portal-docsite/cosmos-sdk/next/docs/learn/">Next</a></li><li><a class="dropdown__link" href="/dev-portal-docsite/cosmos-sdk/build/architecture/adr-020-protobuf-transaction-encoding">0.52</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-020-protobuf-transaction-encoding">0.50</a></li><li><a class="dropdown__link" href="/dev-portal-docsite/cosmos-sdk/0.47/build/architecture/adr-020-protobuf-transaction-encoding">0.47</a></li></ul></div><a href="https://github.com/interchainio/dev-portal-docsite" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="github-icon">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M12 0.300049C5.4 0.300049 0 5.70005 0 12.3001C0 17.6001 3.4 22.1001 8.2 23.7001C8.8 23.8001 9 23.4001 9 23.1001C9 22.8001 9 22.1001 9 21.1001C5.7 21.8001 5 19.5001 5 19.5001C4.5 18.1001 3.7 17.7001 3.7 17.7001C2.5 17.0001 3.7 17.0001 3.7 17.0001C4.9 17.1001 5.5 18.2001 5.5 18.2001C6.6 20.0001 8.3 19.5001 9 19.2001C9.1 18.4001 9.4 17.9001 9.8 17.6001C7.1 17.3001 4.3 16.3001 4.3 11.7001C4.3 10.4001 4.8 9.30005 5.5 8.50005C5.5 8.10005 5 6.90005 5.7 5.30005C5.7 5.30005 6.7 5.00005 9 6.50005C10 6.20005 11 6.10005 12 6.10005C13 6.10005 14 6.20005 15 6.50005C17.3 4.90005 18.3 5.30005 18.3 5.30005C19 7.00005 18.5 8.20005 18.4 8.50005C19.2 9.30005 19.6 10.4001 19.6 11.7001C19.6 16.3001 16.8 17.3001 14.1 17.6001C14.5 18.0001 14.9 18.7001 14.9 19.8001C14.9 21.4001 14.9 22.7001 14.9 23.1001C14.9 23.4001 15.1 23.8001 15.7 23.7001C20.5 22.1001 23.9 17.6001 23.9 12.3001C24 5.70005 18.6 0.300049 12 0.300049Z" fill="currentColor"/>
            </svg>
            </a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-cosmos-sdk-0.50,docs-onboarding-v0.50.x,docs-ibc-go-v8.5.x"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/dev-portal-docsite/cosmos-sdk/0.50/build/">Build</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/dev-portal-docsite/cosmos-sdk/0.50/build/building-apps/app-go">Building Apps</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/dev-portal-docsite/cosmos-sdk/0.50/build/building-modules/intro">Building Modules</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/dev-portal-docsite/cosmos-sdk/0.50/build/run-node/keyring">Running a Node, API and CLI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/dev-portal-docsite/cosmos-sdk/0.50/build/abci/introduction">ABCI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/dev-portal-docsite/cosmos-sdk/0.50/build/modules/auth/">Modules</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/dev-portal-docsite/cosmos-sdk/0.50/build/migrations/intro">Migrations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/dev-portal-docsite/cosmos-sdk/0.50/build/packages/">Packages</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/dev-portal-docsite/cosmos-sdk/0.50/build/tooling/">Tooling</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/">ADRs</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/">Architecture Decision Records (ADR)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/PROCESS">ADR Creation Process</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-002-docs-structure">ADR 002: SDK Documentation Structure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-003-dynamic-capability-store">ADR 3: Dynamic Capability Store</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-004-split-denomination-keys">ADR 004: Split Denomination Keys</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-006-secret-store-replacement">ADR 006: Secret Store Replacement</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-007-specialization-groups">ADR 007: Specialization Groups</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-008-dCERT-group">ADR 008: Decentralized Computer Emergency Response Team (dCERT) Group</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-009-evidence-module">ADR 009: Evidence Module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-010-modular-antehandler">ADR 010: Modular AnteHandler</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-011-generalize-genesis-accounts">ADR 011: Generalize Genesis Accounts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-012-state-accessors">ADR 012: State Accessors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-013-metrics">ADR 013: Observability</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-014-proportional-slashing">ADR 14: Proportional Slashing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-016-validator-consensus-key-rotation">ADR 016: Validator Consensus Key Rotation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-017-historical-header-module">ADR 17: Historical Header Module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-018-extendable-voting-period">ADR 18: Extendable Voting Periods</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-019-protobuf-state-encoding">ADR 019: Protocol Buffer State Encoding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-020-protobuf-transaction-encoding">ADR 020: Protocol Buffer Transaction Encoding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-021-protobuf-query-encoding">ADR 021: Protocol Buffer Query Encoding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-022-custom-panic-handling">ADR 022: Custom BaseApp panic handling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-023-protobuf-naming">ADR 023: Protocol Buffer Naming and Versioning Conventions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-024-coin-metadata">ADR 024: Coin Metadata</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-027-deterministic-protobuf-serialization">ADR 027: Deterministic Protobuf Serialization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-028-public-key-addresses">ADR 028: Public Key Addresses</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-029-fee-grant-module">ADR 029: Fee Grant Module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-030-authz-module">ADR 030: Authorization Module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-031-msg-service">ADR 031: Protobuf Msg Services</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-032-typed-events">ADR 032: Typed Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-033-protobuf-inter-module-comm">ADR 033: Protobuf-based Inter-Module Communication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-034-account-rekeying">ADR 034: Account Rekeying</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-035-rosetta-api-support">ADR 035: Rosetta API Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-036-arbitrary-signature">ADR 036: Arbitrary Message Signature Specification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-037-gov-split-vote">ADR 037: Governance split votes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-038-state-listening">ADR 038: KVStore state listening</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-039-epoched-staking">ADR 039: Epoched Staking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-040-storage-and-smt-state-commitments">ADR 040: Storage and SMT State Commitments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-041-in-place-store-migrations">ADR 041: In-Place Store Migrations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-042-group-module">ADR 042: Group Module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-043-nft-module">ADR 43: NFT Module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-044-protobuf-updates-guidelines">ADR 044: Guidelines for Updating Protobuf Definitions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-045-check-delivertx-middlewares">ADR 045: BaseApp {Check,Deliver}Tx as Middlewares</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-046-module-params">ADR 046: Module Params</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-047-extend-upgrade-plan">ADR 047: Extend Upgrade Plan</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-048-consensus-fees">ADR 048: Multi Tire Gas Price System</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-049-state-sync-hooks">ADR 049: State Sync Hooks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-050-sign-mode-textual-annex1">ADR 050: SIGN_MODE_TEXTUAL: Annex 1 Value Renderers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-050-sign-mode-textual-annex2">ADR 050: SIGN_MODE_TEXTUAL: Annex 2 XXX</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-050-sign-mode-textual">ADR 050: SIGN_MODE_TEXTUAL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-053-go-module-refactoring">ADR 053: Go Module Refactoring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-054-semver-compatible-modules">ADR 054: Semver Compatible SDK Modules</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-055-orm">ADR 055: ORM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-057-app-wiring">ADR 057: App Wiring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-058-auto-generated-cli">ADR 058: Auto-Generated CLI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-059-test-scopes">ADR 059: Test Scopes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-060-abci-1.0">ADR 60: ABCI 1.0 Integration (Phase I)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-061-liquid-staking">ADR ADR-061: Liquid Staking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-062-collections-state-layer">ADR 062: Collections, a simplified storage layer for cosmos-sdk modules.</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-063-core-module-api">ADR 063: Core Module API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-064-abci-2.0">ADR 64: ABCI 2.0 Integration (Phase II)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-065-store-v2">ADR-065: Store V2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-068-preblock">ADR 068: Preblock</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-template">ADR {ADR-NUMBER}:</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/dev-portal-docsite/cosmos-sdk/0.50/build/rfc/">RFC</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/dev-portal-docsite/cosmos-sdk/0.50/build/spec/">Specifications</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Interchain Stack<!-- --> <b>0.50</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/dev-portal-docsite/cosmos-sdk/build/architecture/adr-020-protobuf-transaction-encoding">latest version</a></b> (<!-- -->0.52<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/dev-portal-docsite/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">ADRs</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">ADR 020: Protocol Buffer Transaction Encoding</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 0.50</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>ADR 020: Protocol Buffer Transaction Encoding</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="changelog">Changelog<a href="#changelog" class="hash-link" aria-label="Direct link to Changelog" title="Direct link to Changelog">​</a></h2><ul><li>2020 March 06: Initial Draft</li><li>2020 March 12: API Updates</li><li>2020 April 13: Added details on interface <code>oneof</code> handling</li><li>2020 April 30: Switch to <code>Any</code></li><li>2020 May 14: Describe public key encoding</li><li>2020 June 08: Store <code>TxBody</code> and <code>AuthInfo</code> as bytes in <code>SignDoc</code>; Document <code>TxRaw</code> as broadcast and storage type.</li><li>2020 August 07: Use ADR 027 for serializing <code>SignDoc</code>.</li><li>2020 August 19: Move sequence field from <code>SignDoc</code> to <code>SignerInfo</code>, as discussed in <a href="https://github.com/cosmos/cosmos-sdk/issues/6966" target="_blank" rel="noopener noreferrer">#6966</a>.</li><li>2020 September 25: Remove <code>PublicKey</code> type in favor of <code>secp256k1.PubKey</code>, <code>ed25519.PubKey</code> and <code>multisig.LegacyAminoPubKey</code>.</li><li>2020 October 15: Add <code>GetAccount</code> and <code>GetAccountWithHeight</code> methods to the <code>AccountRetriever</code> interface.</li><li>2021 Feb 24: The Cosmos SDK does not use Tendermint&#x27;s <code>PubKey</code> interface anymore, but its own <code>cryptotypes.PubKey</code>. Updates to reflect this.</li><li>2021 May 3: Rename <code>clientCtx.JSONMarshaler</code> to <code>clientCtx.JSONCodec</code>.</li><li>2021 June 10: Add <code>clientCtx.Codec: codec.Codec</code>.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="status">Status<a href="#status" class="hash-link" aria-label="Direct link to Status" title="Direct link to Status">​</a></h2><p>Accepted</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="context">Context<a href="#context" class="hash-link" aria-label="Direct link to Context" title="Direct link to Context">​</a></h2><p>This ADR is a continuation of the motivation, design, and context established in
<a href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-019-protobuf-state-encoding">ADR 019</a>, namely, we aim to design the
Protocol Buffer migration path for the client-side of the Cosmos SDK.</p><p>Specifically, the client-side migration path primarily includes tx generation and
signing, message construction and routing, in addition to CLI &amp; REST handlers and
business logic (i.e. queriers).</p><p>With this in mind, we will tackle the migration path via two main areas, txs and
querying. However, this ADR solely focuses on transactions. Querying should be
addressed in a future ADR, but it should build off of these proposals.</p><p>Based on detailed discussions (<a href="https://github.com/cosmos/cosmos-sdk/issues/6030" target="_blank" rel="noopener noreferrer">#<!-- -->6030</a>
and <a href="https://github.com/cosmos/cosmos-sdk/issues/6078" target="_blank" rel="noopener noreferrer">#<!-- -->6078</a>), the original
design for transactions was changed substantially from an <code>oneof</code> /JSON-signing
approach to the approach described below.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="decision">Decision<a href="#decision" class="hash-link" aria-label="Direct link to Decision" title="Direct link to Decision">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="transactions">Transactions<a href="#transactions" class="hash-link" aria-label="Direct link to Transactions" title="Direct link to Transactions">​</a></h3><p>Since interface values are encoded with <code>google.protobuf.Any</code> in state (see <a href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-019-protobuf-state-encoding">ADR 019</a>),
<code>sdk.Msg</code>s are encoding with <code>Any</code> in transactions.</p><p>One of the main goals of using <code>Any</code> to encode interface values is to have a
core set of types which is reused by apps so that
clients can safely be compatible with as many chains as possible.</p><p>It is one of the goals of this specification to provide a flexible cross-chain transaction
format that can serve a wide variety of use cases without breaking client
compatibility.</p><p>In order to facilitate signing, transactions are separated into <code>TxBody</code>,
which will be re-used by <code>SignDoc</code> below, and <code>signatures</code>:</p><div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// types/types.proto</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">package cosmos_sdk.v1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message Tx {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TxBody body = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AuthInfo auth_info = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // A list of signatures that matches the length and order of AuthInfo&#x27;s signer_infos to</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // allow connecting signature meta information like public key and signing mode by position.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    repeated bytes signatures = 3;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// A variant of Tx that pins the signer&#x27;s exact binary represenation of body and</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// auth_info. This is used for signing, broadcasting and verification. The binary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// `serialize(tx: TxRaw)` is stored in Tendermint and the hash `sha256(serialize(tx: TxRaw))`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// becomes the &quot;txhash&quot;, commonly used as the transaction ID.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message TxRaw {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // A protobuf serialization of a TxBody that matches the representation in SignDoc.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bytes body = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // A protobuf serialization of an AuthInfo that matches the representation in SignDoc.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bytes auth_info = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // A list of signatures that matches the length and order of AuthInfo&#x27;s signer_infos to</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // allow connecting signature meta information like public key and signing mode by position.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    repeated bytes signatures = 3;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message TxBody {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // A list of messages to be executed. The required signers of those messages define</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // the number and order of elements in AuthInfo&#x27;s signer_infos and Tx&#x27;s signatures.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Each required signer address is added to the list only the first time it occurs.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // By convention, the first required signer (usually from the first message) is referred</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // to as the primary signer and pays the fee for the whole transaction.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    repeated google.protobuf.Any messages = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    string memo = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int64 timeout_height = 3;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    repeated google.protobuf.Any extension_options = 1023;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message AuthInfo {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // This list defines the signing modes for the required signers. The number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // and order of elements must match the required signers from TxBody&#x27;s messages.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // The first element is the primary signer and the one which pays the fee.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    repeated SignerInfo signer_infos = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // The fee can be calculated based on the cost of evaluating the body and doing signature verification of the signers. This can be estimated via simulation.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Fee fee = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message SignerInfo {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // The public key is optional for accounts that already exist in state. If unset, the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // verifier can use the required signer address for this position and lookup the public key.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    google.protobuf.Any public_key = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ModeInfo describes the signing mode of the signer and is a nested</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // structure to support nested multisig pubkey&#x27;s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ModeInfo mode_info = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // sequence is the sequence of the account, which describes the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // number of committed transactions signed by a given address. It is used to prevent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // replay attacks.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint64 sequence = 3;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message ModeInfo {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oneof sum {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Single single = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Multi multi = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Single is the mode info for a single signer. It is structured as a message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // to allow for additional fields such as locale for SIGN_MODE_TEXTUAL in the future</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    message Single {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SignMode mode = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Multi is the mode info for a multisig public key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    message Multi {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // bitarray specifies which keys within the multisig are signing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CompactBitArray bitarray = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // mode_infos is the corresponding modes of the signers of the multisig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // which could include nested multisig public keys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        repeated ModeInfo mode_infos = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enum SignMode {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SIGN_MODE_UNSPECIFIED = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SIGN_MODE_DIRECT = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SIGN_MODE_TEXTUAL = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SIGN_MODE_LEGACY_AMINO_JSON = 127;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As will be discussed below, in order to include as much of the <code>Tx</code> as possible
in the <code>SignDoc</code>, <code>SignerInfo</code> is separated from signatures so that only the
raw signatures themselves live outside of what is signed over.</p><p>Because we are aiming for a flexible, extensible cross-chain transaction
format, new transaction processing options should be added to <code>TxBody</code> as soon
those use cases are discovered, even if they can&#x27;t be implemented yet.</p><p>Because there is coordination overhead in this, <code>TxBody</code> includes an
<code>extension_options</code> field which can be used for any transaction processing
options that are not already covered. App developers should, nevertheless,
attempt to upstream important improvements to <code>Tx</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="signing">Signing<a href="#signing" class="hash-link" aria-label="Direct link to Signing" title="Direct link to Signing">​</a></h3><p>All of the signing modes below aim to provide the following guarantees:</p><ul><li><strong>No Malleability</strong>: <code>TxBody</code> and <code>AuthInfo</code> cannot change once the transaction
is signed</li><li><strong>Predictable Gas</strong>: if I am signing a transaction where I am paying a fee,
the final gas is fully dependent on what I am signing</li></ul><p>These guarantees give the maximum amount confidence to message signers that
manipulation of <code>Tx</code>s by intermediaries can&#x27;t result in any meaningful changes.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="sign_mode_direct"><code>SIGN_MODE_DIRECT</code><a href="#sign_mode_direct" class="hash-link" aria-label="Direct link to sign_mode_direct" title="Direct link to sign_mode_direct">​</a></h4><p>The &quot;direct&quot; signing behavior is to sign the raw <code>TxBody</code> bytes as broadcast over
the wire. This has the advantages of:</p><ul><li>requiring the minimum additional client capabilities beyond a standard protocol
buffers implementation</li><li>leaving effectively zero holes for transaction malleability (i.e. there are no
subtle differences between the signing and encoding formats which could
potentially be exploited by an attacker)</li></ul><p>Signatures are structured using the <code>SignDoc</code> below which reuses the serialization of
<code>TxBody</code> and <code>AuthInfo</code> and only adds the fields which are needed for signatures:</p><div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// types/types.proto</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message SignDoc {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // A protobuf serialization of a TxBody that matches the representation in TxRaw.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bytes body = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // A protobuf serialization of an AuthInfo that matches the representation in TxRaw.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bytes auth_info = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    string chain_id = 3;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint64 account_number = 4;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In order to sign in the default mode, clients take the following steps:</p><ol><li>Serialize <code>TxBody</code> and <code>AuthInfo</code> using any valid protobuf implementation.</li><li>Create a <code>SignDoc</code> and serialize it using <a href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-027-deterministic-protobuf-serialization">ADR 027</a>.</li><li>Sign the encoded <code>SignDoc</code> bytes.</li><li>Build a <code>TxRaw</code> and serialize it for broadcasting.</li></ol><p>Signature verification is based on comparing the raw <code>TxBody</code> and <code>AuthInfo</code>
bytes encoded in <code>TxRaw</code> not based on any <a href="https://github.com/regen-network/canonical-proto3" target="_blank" rel="noopener noreferrer">&quot;canonicalization&quot;</a>
algorithm which creates added complexity for clients in addition to preventing
some forms of upgradeability (to be addressed later in this document).</p><p>Signature verifiers do:</p><ol><li>Deserialize a <code>TxRaw</code> and pull out <code>body</code> and <code>auth_info</code>.</li><li>Create a list of required signer addresses from the messages.</li><li>For each required signer:<ul><li>Pull account number and sequence from the state.</li><li>Obtain the public key either from state or <code>AuthInfo</code>&#x27;s <code>signer_infos</code>.</li><li>Create a <code>SignDoc</code> and serialize it using <a href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-027-deterministic-protobuf-serialization">ADR 027</a>.</li><li>Verify the signature at the same list position against the serialized <code>SignDoc</code>.</li></ul></li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="sign_mode_legacy_amino"><code>SIGN_MODE_LEGACY_AMINO</code><a href="#sign_mode_legacy_amino" class="hash-link" aria-label="Direct link to sign_mode_legacy_amino" title="Direct link to sign_mode_legacy_amino">​</a></h4><p>In order to support legacy wallets and exchanges, Amino JSON will be temporarily
supported transaction signing. Once wallets and exchanges have had a
chance to upgrade to protobuf based signing, this option will be disabled. In
the meantime, it is foreseen that disabling the current Amino signing would cause
too much breakage to be feasible. Note that this is mainly a requirement of the
Cosmos Hub and other chains may choose to disable Amino signing immediately.</p><p>Legacy clients will be able to sign a transaction using the current Amino
JSON format and have it encoded to protobuf using the REST <code>/tx/encode</code>
endpoint before broadcasting.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="sign_mode_textual"><code>SIGN_MODE_TEXTUAL</code><a href="#sign_mode_textual" class="hash-link" aria-label="Direct link to sign_mode_textual" title="Direct link to sign_mode_textual">​</a></h4><p>As was discussed extensively in <a href="https://github.com/cosmos/cosmos-sdk/issues/6078" target="_blank" rel="noopener noreferrer">#<!-- -->6078</a>,
there is a desire for a human-readable signing encoding, especially for hardware
wallets like the <a href="https://www.ledger.com" target="_blank" rel="noopener noreferrer">Ledger</a> which display
transaction contents to users before signing. JSON was an attempt at this but
falls short of the ideal.</p><p><code>SIGN_MODE_TEXTUAL</code> is intended as a placeholder for a human-readable
encoding which will replace Amino JSON. This new encoding should be even more
focused on readability than JSON, possibly based on formatting strings like
<a href="http://userguide.icu-project.org/formatparse/messages" target="_blank" rel="noopener noreferrer">MessageFormat</a>.</p><p>In order to ensure that the new human-readable format does not suffer from
transaction malleability issues, <code>SIGN_MODE_TEXTUAL</code>
requires that the <em>human-readable bytes are concatenated with the raw <code>SignDoc</code></em>
to generate sign bytes.</p><p>Multiple human-readable formats (maybe even localized messages) may be supported
by <code>SIGN_MODE_TEXTUAL</code> when it is implemented.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="unknown-field-filtering">Unknown Field Filtering<a href="#unknown-field-filtering" class="hash-link" aria-label="Direct link to Unknown Field Filtering" title="Direct link to Unknown Field Filtering">​</a></h3><p>Unknown fields in protobuf messages should generally be rejected by transaction
processors because:</p><ul><li>important data may be present in the unknown fields, that if ignored, will
cause unexpected behavior for clients</li><li>they present a malleability vulnerability where attackers can bloat tx size
by adding random uninterpreted data to unsigned content (i.e. the master <code>Tx</code>,
not <code>TxBody</code>)</li></ul><p>There are also scenarios where we may choose to safely ignore unknown fields
(<a href="https://github.com/cosmos/cosmos-sdk/issues/6078#issuecomment-624400188" target="_blank" rel="noopener noreferrer">https://github.com/cosmos/cosmos-sdk/issues/6078#issuecomment-624400188</a>) to
provide graceful forwards compatibility with newer clients.</p><p>We propose that field numbers with bit 11 set (for most use cases this is
the range of 1024-2047) be considered non-critical fields that can safely be
ignored if unknown.</p><p>To handle this we will need an unknown field filter that:</p><ul><li>always rejects unknown fields in unsigned content (i.e. top-level <code>Tx</code> and
unsigned parts of <code>AuthInfo</code> if present based on the signing mode)</li><li>rejects unknown fields in all messages (including nested <code>Any</code>s) other than
fields with bit 11 set</li></ul><p>This will likely need to be a custom protobuf parser pass that takes message bytes
and <code>FileDescriptor</code>s and returns a boolean result.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="public-key-encoding">Public Key Encoding<a href="#public-key-encoding" class="hash-link" aria-label="Direct link to Public Key Encoding" title="Direct link to Public Key Encoding">​</a></h3><p>Public keys in the Cosmos SDK implement the <code>cryptotypes.PubKey</code> interface.
We propose to use <code>Any</code> for protobuf encoding as we are doing with other interfaces (for example, in <code>BaseAccount.PubKey</code> and <code>SignerInfo.PublicKey</code>).
The following public keys are implemented: secp256k1, secp256r1, ed25519 and legacy-multisignature.</p><p>Ex:</p><div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">message PubKey {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bytes key = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>multisig.LegacyAminoPubKey</code> has an array of <code>Any</code>&#x27;s member to support any
protobuf public key type.</p><p>Apps should only attempt to handle a registered set of public keys that they
have tested. The provided signature verification ante handler decorators will
enforce this.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cli--rest">CLI &amp; REST<a href="#cli--rest" class="hash-link" aria-label="Direct link to CLI &amp; REST" title="Direct link to CLI &amp; REST">​</a></h3><p>Currently, the REST and CLI handlers encode and decode types and txs via Amino
JSON encoding using a concrete Amino codec. Being that some of the types dealt with
in the client can be interfaces, similar to how we described in <a href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-019-protobuf-state-encoding">ADR 019</a>,
the client logic will now need to take a codec interface that knows not only how
to handle all the types, but also knows how to generate transactions, signatures,
and messages.</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> AccountRetriever </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">GetAccount</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">clientCtx Context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> addr sdk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AccAddress</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Account</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">GetAccountWithHeight</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">clientCtx Context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> addr sdk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AccAddress</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Account</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">int64</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">EnsureExists</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">clientCtx client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> addr sdk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AccAddress</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">GetAccountNumberSequence</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">clientCtx client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> addr sdk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AccAddress</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">uint64</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">uint64</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> Generator </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">NewTx</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> TxBuilder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">NewFee</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> ClientFee</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">NewSignature</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> ClientSignature</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">MarshalTx</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tx types</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Tx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">byte</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> TxBuilder </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">GetTx</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> sdk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Tx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">SetMsgs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">...</span><span class="token plain">sdk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Msg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">GetSignatures</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">sdk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Signature</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">SetSignatures</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">...</span><span class="token plain">sdk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Signature</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">GetFee</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> sdk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Fee</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">SetFee</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sdk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Fee</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">GetMemo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">SetMemo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We then update <code>Context</code> to have new fields: <code>Codec</code>, <code>TxGenerator</code>,
and <code>AccountRetriever</code>, and we update <code>AppModuleBasic.GetTxCmd</code> to take
a <code>Context</code> which should have all of these fields pre-populated.</p><p>Each client method should then use one of the <code>Init</code> methods to re-initialize
the pre-populated <code>Context</code>. <code>tx.GenerateOrBroadcastTx</code> can be used to
generate or broadcast a transaction. For example:</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;github.com/spf13/cobra&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;github.com/cosmos/cosmos-sdk/client&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;github.com/cosmos/cosmos-sdk/client/tx&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NewCmdDoSomething</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">clientCtx client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">cobra</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Command </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">cobra</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Command</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RunE</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cmd </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">cobra</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Command</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> args </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            clientCtx </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">InitWithInput</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cmd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">InOrStdin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            msg </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> NewSomeMsg</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GenerateOrBroadcastTx</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">clientCtx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> msg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="future-improvements">Future Improvements<a href="#future-improvements" class="hash-link" aria-label="Direct link to Future Improvements" title="Direct link to Future Improvements">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sign_mode_textual-specification"><code>SIGN_MODE_TEXTUAL</code> specification<a href="#sign_mode_textual-specification" class="hash-link" aria-label="Direct link to sign_mode_textual-specification" title="Direct link to sign_mode_textual-specification">​</a></h3><p>A concrete specification and implementation of <code>SIGN_MODE_TEXTUAL</code> is intended
as a near-term future improvement so that the ledger app and other wallets
can gracefully transition away from Amino JSON.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sign_mode_direct_aux"><code>SIGN_MODE_DIRECT_AUX</code><a href="#sign_mode_direct_aux" class="hash-link" aria-label="Direct link to sign_mode_direct_aux" title="Direct link to sign_mode_direct_aux">​</a></h3><p>(<!-- -->*<!-- -->Documented as option (3) in <a href="https://github.com/cosmos/cosmos-sdk/issues/6078#issuecomment-628026933" target="_blank" rel="noopener noreferrer">https://github.com/cosmos/cosmos-sdk/issues/6078#issuecomment-628026933</a>)</p><p>We could add a mode <code>SIGN_MODE_DIRECT_AUX</code>
to support scenarios where multiple signatures
are being gathered into a single transaction but the message composer does not
yet know which signatures will be included in the final transaction. For instance,
I may have a 3/5 multisig wallet and want to send a <code>TxBody</code> to all 5
signers to see who signs first. As soon as I have 3 signatures then I will go
ahead and build the full transaction.</p><p>With <code>SIGN_MODE_DIRECT</code>, each signer needs
to sign the full <code>AuthInfo</code> which includes the full list of all signers and
their signing modes, making the above scenario very hard.</p><p><code>SIGN_MODE_DIRECT_AUX</code> would allow &quot;auxiliary&quot; signers to create their signature
using only <code>TxBody</code> and their own <code>PublicKey</code>. This allows the full list of
signers in <code>AuthInfo</code> to be delayed until signatures have been collected.</p><p>An &quot;auxiliary&quot; signer is any signer besides the primary signer who is paying
the fee. For the primary signer, the full <code>AuthInfo</code> is actually needed to calculate gas and fees
because that is dependent on how many signers and which key types and signing
modes they are using. Auxiliary signers, however, do not need to worry about
fees or gas and thus can just sign <code>TxBody</code>.</p><p>To generate a signature in <code>SIGN_MODE_DIRECT_AUX</code> these steps would be followed:</p><ol><li><p>Encode <code>SignDocAux</code> (with the same requirement that fields must be serialized
in order):</p><div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// types/types.proto</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message SignDocAux {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bytes body_bytes = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // PublicKey is included in SignDocAux :</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 1. as a special case for multisig public keys. For multisig public keys,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // the signer should use the top-level multisig public key they are signing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // against, not their own public key. This is to prevent against a form</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // of malleability where a signature could be taken out of context of the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // multisig key that was intended to be signed for</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 2. to guard against scenario where configuration information is encoded</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // in public keys (it has been proposed) such that two keys can generate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // the same signature but have different security properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // By including it here, the composer of AuthInfo cannot reference the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // a public key variant the signer did not intend to use</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PublicKey public_key = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    string chain_id = 3;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint64 account_number = 4;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Sign the encoded <code>SignDocAux</code> bytes</p></li><li><p>Send their signature and <code>SignerInfo</code> to primary signer who will then
sign and broadcast the final transaction (with <code>SIGN_MODE_DIRECT</code> and <code>AuthInfo</code>
added) once enough signatures have been collected</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sign_mode_direct_relaxed"><code>SIGN_MODE_DIRECT_RELAXED</code><a href="#sign_mode_direct_relaxed" class="hash-link" aria-label="Direct link to sign_mode_direct_relaxed" title="Direct link to sign_mode_direct_relaxed">​</a></h3><p>(<em>Documented as option (1)(a) in <a href="https://github.com/cosmos/cosmos-sdk/issues/6078#issuecomment-628026933" target="_blank" rel="noopener noreferrer">https://github.com/cosmos/cosmos-sdk/issues/6078#issuecomment-628026933</a></em>)</p><p>This is a variation of <code>SIGN_MODE_DIRECT</code> where multiple signers wouldn&#x27;t need to
coordinate public keys and signing modes in advance. It would involve an alternate
<code>SignDoc</code> similar to <code>SignDocAux</code> above with fee. This could be added in the future
if client developers found the burden of collecting public keys and modes in advance
too burdensome.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="consequences">Consequences<a href="#consequences" class="hash-link" aria-label="Direct link to Consequences" title="Direct link to Consequences">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="positive">Positive<a href="#positive" class="hash-link" aria-label="Direct link to Positive" title="Direct link to Positive">​</a></h3><ul><li>Significant performance gains.</li><li>Supports backward and forward type compatibility.</li><li>Better support for cross-language clients.</li><li>Multiple signing modes allow for greater protocol evolution</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="negative">Negative<a href="#negative" class="hash-link" aria-label="Direct link to Negative" title="Direct link to Negative">​</a></h3><ul><li><code>google.protobuf.Any</code> type URLs increase transaction size although the effect
may be negligible or compression may be able to mitigate it.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="neutral">Neutral<a href="#neutral" class="hash-link" aria-label="Direct link to Neutral" title="Direct link to Neutral">​</a></h3><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-019-protobuf-state-encoding"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">ADR 019: Protocol Buffer State Encoding</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/dev-portal-docsite/cosmos-sdk/0.50/build/architecture/adr-021-protobuf-query-encoding"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ADR 021: Protocol Buffer Query Encoding</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#changelog" class="table-of-contents__link toc-highlight">Changelog</a></li><li><a href="#status" class="table-of-contents__link toc-highlight">Status</a></li><li><a href="#context" class="table-of-contents__link toc-highlight">Context</a></li><li><a href="#decision" class="table-of-contents__link toc-highlight">Decision</a><ul><li><a href="#transactions" class="table-of-contents__link toc-highlight">Transactions</a></li><li><a href="#signing" class="table-of-contents__link toc-highlight">Signing</a></li><li><a href="#unknown-field-filtering" class="table-of-contents__link toc-highlight">Unknown Field Filtering</a></li><li><a href="#public-key-encoding" class="table-of-contents__link toc-highlight">Public Key Encoding</a></li><li><a href="#cli--rest" class="table-of-contents__link toc-highlight">CLI &amp; REST</a></li></ul></li><li><a href="#future-improvements" class="table-of-contents__link toc-highlight">Future Improvements</a><ul><li><a href="#sign_mode_textual-specification" class="table-of-contents__link toc-highlight"><code>SIGN_MODE_TEXTUAL</code> specification</a></li><li><a href="#sign_mode_direct_aux" class="table-of-contents__link toc-highlight"><code>SIGN_MODE_DIRECT_AUX</code></a></li><li><a href="#sign_mode_direct_relaxed" class="table-of-contents__link toc-highlight"><code>SIGN_MODE_DIRECT_RELAXED</code></a></li></ul></li><li><a href="#consequences" class="table-of-contents__link toc-highlight">Consequences</a><ul><li><a href="#positive" class="table-of-contents__link toc-highlight">Positive</a></li><li><a href="#negative" class="table-of-contents__link toc-highlight">Negative</a></li><li><a href="#neutral" class="table-of-contents__link toc-highlight">Neutral</a></li></ul></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"></ul></div><div class="col footer__col"><div class="footer__title">Stack Components</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/cosmos/ibc-go" target="_blank" rel="noopener noreferrer" class="footer__link-item">IBC-Go<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/cosmos/cosmos-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">CosmosSDK<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/cometbft/cometbft" target="_blank" rel="noopener noreferrer" class="footer__link-item">CometBFT<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/CosmWasm/cosmwasm" target="_blank" rel="noopener noreferrer" class="footer__link-item">CosmWasm<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/cosmos/relayer" target="_blank" rel="noopener noreferrer" class="footer__link-item">Go Relayer<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://hermes.informal.systems/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Hermes Relayer<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/cosmos/ibc-rs" target="_blank" rel="noopener noreferrer" class="footer__link-item">IBC-rs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/strangelove-ventures/interchaintest" target="_blank" rel="noopener noreferrer" class="footer__link-item">Interchaintest<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.com/invite/interchain" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/interchain_io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@interchain_io" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://interchain.io/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2025 <a href="https://interchain.io/">Interchain Foundation</a>. All rights reserved.</div></div></div></footer></div>
<script src="/dev-portal-docsite/assets/js/runtime~main.e260afe7.js"></script>
<script src="/dev-portal-docsite/assets/js/main.175a359f.js"></script>
</body>
</html>