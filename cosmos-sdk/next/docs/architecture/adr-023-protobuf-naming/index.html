<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-cosmos-sdk docs-doc-id-docs/architecture/adr-023-protobuf-naming" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">ADR 023: Protocol Buffer Naming and Versioning Conventions | Interchain Stack</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs-interchain.io/dev-portal-docsite/cosmos-sdk/next/docs/architecture/adr-023-protobuf-naming"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-cosmos-sdk-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-cosmos-sdk-current"><meta data-rh="true" property="og:title" content="ADR 023: Protocol Buffer Naming and Versioning Conventions | Interchain Stack"><meta data-rh="true" name="description" content="Changelog"><meta data-rh="true" property="og:description" content="Changelog"><link data-rh="true" rel="icon" href="/dev-portal-docsite/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs-interchain.io/dev-portal-docsite/cosmos-sdk/next/docs/architecture/adr-023-protobuf-naming"><link data-rh="true" rel="alternate" href="https://docs-interchain.io/dev-portal-docsite/cosmos-sdk/next/docs/architecture/adr-023-protobuf-naming" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs-interchain.io/dev-portal-docsite/cosmos-sdk/next/docs/architecture/adr-023-protobuf-naming" hreflang="x-default"><script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="be413c15-3002-497e-9e30-676ea0039a9e" data-project-name="InterchainStack" data-project-color="#FFFFFF" data-button-text-color="#000" data-submit-query-button-bg-color="#000000" data-modal-disclaimer="InterchainGPT is a fine-tuned LLM for the Interchain with access to Interchain Stack developer documentation and resources. Please note that answers are generated by an AI so please use your best judgement before implementing" data-modal-image="img/spirograph.svg" data-project-logo="img/spirograph.svg" data-user-analytics-fingerprint-enabled="true" async></script><link rel="stylesheet" href="/dev-portal-docsite/assets/css/styles.3411b2aa.css">
<link rel="preload" href="/dev-portal-docsite/assets/js/runtime~main.e260afe7.js" as="script">
<link rel="preload" href="/dev-portal-docsite/assets/js/main.175a359f.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#20232a;color:#fff" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">The Interchain Stack Docsite is in MVP state; please submit comments with the feedback button. The Ask AI button is also very powerful.</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/dev-portal-docsite/"><div class="navbar__logo"><img src="/dev-portal-docsite/img/interchain_logo.svg" alt="Interchain Docs" class="themedImage_ToTc themedImage--light_HNdA"><img src="/dev-portal-docsite/img/interchain_logo.svg" alt="Interchain Docs" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" href="/dev-portal-docsite/onboarding">Onboarding</a><a class="navbar__item navbar__link" href="/dev-portal-docsite/ibc-go">IBC-Go</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/dev-portal-docsite/cosmos-sdk/learn">CosmosSDK</a><a href="https://docs.cometbft.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">CometBFT</a><a href="https://docs.cosmwasm.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">CosmWasm</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/dev-portal-docsite/cosmos-sdk/next/docs/learn/">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/dev-portal-docsite/cosmos-sdk/next/docs/architecture/adr-023-protobuf-naming">Next</a></li><li><a class="dropdown__link" href="/dev-portal-docsite/cosmos-sdk/learn/">0.52</a></li><li><a class="dropdown__link" href="/dev-portal-docsite/cosmos-sdk/0.50/learn/">0.50</a></li><li><a class="dropdown__link" href="/dev-portal-docsite/cosmos-sdk/0.47/learn/">0.47</a></li></ul></div><a href="https://github.com/interchainio/dev-portal-docsite" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="github-icon">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M12 0.300049C5.4 0.300049 0 5.70005 0 12.3001C0 17.6001 3.4 22.1001 8.2 23.7001C8.8 23.8001 9 23.4001 9 23.1001C9 22.8001 9 22.1001 9 21.1001C5.7 21.8001 5 19.5001 5 19.5001C4.5 18.1001 3.7 17.7001 3.7 17.7001C2.5 17.0001 3.7 17.0001 3.7 17.0001C4.9 17.1001 5.5 18.2001 5.5 18.2001C6.6 20.0001 8.3 19.5001 9 19.2001C9.1 18.4001 9.4 17.9001 9.8 17.6001C7.1 17.3001 4.3 16.3001 4.3 11.7001C4.3 10.4001 4.8 9.30005 5.5 8.50005C5.5 8.10005 5 6.90005 5.7 5.30005C5.7 5.30005 6.7 5.00005 9 6.50005C10 6.20005 11 6.10005 12 6.10005C13 6.10005 14 6.20005 15 6.50005C17.3 4.90005 18.3 5.30005 18.3 5.30005C19 7.00005 18.5 8.20005 18.4 8.50005C19.2 9.30005 19.6 10.4001 19.6 11.7001C19.6 16.3001 16.8 17.3001 14.1 17.6001C14.5 18.0001 14.9 18.7001 14.9 19.8001C14.9 21.4001 14.9 22.7001 14.9 23.1001C14.9 23.4001 15.1 23.8001 15.7 23.7001C20.5 22.1001 23.9 17.6001 23.9 12.3001C24 5.70005 18.6 0.300049 12 0.300049Z" fill="currentColor"/>
            </svg>
            </a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-cosmos-sdk-current,docs-onboarding-v0.50.x,docs-ibc-go-v8.5.x"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->Interchain Stack<!-- --> <b>Next</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/dev-portal-docsite/cosmos-sdk/learn/">latest version</a></b> (<!-- -->0.52<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><span class="theme-doc-version-badge badge badge--secondary">Version: Next</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>ADR 023: Protocol Buffer Naming and Versioning Conventions</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="changelog">Changelog<a href="#changelog" class="hash-link" aria-label="Direct link to Changelog" title="Direct link to Changelog">​</a></h2><ul><li>2020 April 27: Initial Draft</li><li>2020 August 5: Update guidelines</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="status">Status<a href="#status" class="hash-link" aria-label="Direct link to Status" title="Direct link to Status">​</a></h2><p>Accepted</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="context">Context<a href="#context" class="hash-link" aria-label="Direct link to Context" title="Direct link to Context">​</a></h2><p>Protocol Buffers provide a basic <a href="https://protobuf.dev/programming-guides/style/" target="_blank" rel="noopener noreferrer">style guide</a>
and <a href="https://buf.build/docs/style-guide" target="_blank" rel="noopener noreferrer">Buf</a> builds upon that. To the
extent possible, we want to follow industry accepted guidelines and wisdom for
the effective usage of protobuf, deviating from those only when there is clear
rationale for our use case.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="adoption-of-any">Adoption of <code>Any</code><a href="#adoption-of-any" class="hash-link" aria-label="Direct link to adoption-of-any" title="Direct link to adoption-of-any">​</a></h3><p>The adoption of <code>google.protobuf.Any</code> as the recommended approach for encoding
interface types (as opposed to <code>oneof</code>) makes package naming a central part
of the encoding as fully-qualified message names now appear in encoded
messages.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="current-directory-organization">Current Directory Organization<a href="#current-directory-organization" class="hash-link" aria-label="Direct link to Current Directory Organization" title="Direct link to Current Directory Organization">​</a></h3><p>Thus far we have mostly followed <a href="https://buf.build" target="_blank" rel="noopener noreferrer">Buf&#x27;s</a> <a href="https://buf.build/docs/lint-checkers#default" target="_blank" rel="noopener noreferrer">DEFAULT</a>
recommendations, with the minor deviation of disabling <a href="https://buf.build/docs/lint-checkers#file_layout" target="_blank" rel="noopener noreferrer"><code>PACKAGE_DIRECTORY_MATCH</code></a>
which although being convenient for developing code comes with the warning
from Buf that:</p><blockquote><p>you will have a very bad time with many Protobuf plugins across various languages if you do not do this</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="adoption-of-grpc-queries">Adoption of gRPC Queries<a href="#adoption-of-grpc-queries" class="hash-link" aria-label="Direct link to Adoption of gRPC Queries" title="Direct link to Adoption of gRPC Queries">​</a></h3><p>In <a href="/dev-portal-docsite/cosmos-sdk/next/docs/architecture/adr-021-protobuf-query-encoding">ADR 021</a>, gRPC was adopted for Protobuf
native queries. The full gRPC service path thus becomes a key part of ABCI query
path. In the future, gRPC queries may be allowed from within persistent scripts
by technologies such as CosmWasm and these query routes would be stored within
script binaries.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="decision">Decision<a href="#decision" class="hash-link" aria-label="Direct link to Decision" title="Direct link to Decision">​</a></h2><p>The goal of this ADR is to provide thoughtful naming conventions that:</p><ul><li>encourage a good user experience for when users interact directly with
.proto files and fully-qualified protobuf names</li><li>balance conciseness against the possibility of either over-optimizing (making
names too short and cryptic) or under-optimizing (just accepting bloated names
with lots of redundant information)</li></ul><p>These guidelines are meant to act as a style guide for both the Cosmos SDK and
third-party modules.</p><p>As a starting point, we should adopt all of the <a href="https://buf.build/docs/lint-checkers#default" target="_blank" rel="noopener noreferrer">DEFAULT</a>
checkers in <a href="https://buf.build" target="_blank" rel="noopener noreferrer">Buf&#x27;s</a> including <a href="https://buf.build/docs/lint-checkers#file_layout" target="_blank" rel="noopener noreferrer"><code>PACKAGE_DIRECTORY_MATCH</code></a>,
except:</p><ul><li><a href="https://buf.build/docs/lint-checkers#package_version_suffix" target="_blank" rel="noopener noreferrer">PACKAGE_VERSION_SUFFIX</a></li><li><a href="https://buf.build/docs/lint-checkers#service_suffix" target="_blank" rel="noopener noreferrer">SERVICE_SUFFIX</a></li></ul><p>Further guidelines to be described below.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="principles">Principles<a href="#principles" class="hash-link" aria-label="Direct link to Principles" title="Direct link to Principles">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="concise-and-descriptive-names">Concise and Descriptive Names<a href="#concise-and-descriptive-names" class="hash-link" aria-label="Direct link to Concise and Descriptive Names" title="Direct link to Concise and Descriptive Names">​</a></h4><p>Names should be descriptive enough to convey their meaning and distinguish
them from other names.</p><p>Given that we are using fully-qualified names within
<code>google.protobuf.Any</code> as well as within gRPC query routes, we should aim to
keep names concise, without going overboard. The general rule of thumb should
be if a shorter name would convey more or else the same thing, pick the shorter
name.</p><p>For instance, <code>cosmos.bank.MsgSend</code> (19 bytes) conveys roughly the same information
as <code>cosmos_sdk.x.bank.v1.MsgSend</code> (28 bytes) but is more concise.</p><p>Such conciseness makes names both more pleasant to work with and take up less
space within transactions and on the wire.</p><p>We should also resist the temptation to over-optimize, by making names
cryptically short with abbreviations. For instance, we shouldn&#x27;t try to
reduce <code>cosmos.bank.MsgSend</code> to <code>csm.bk.MSnd</code> just to save a few bytes.</p><p>The goal is to make names <strong><em>concise but not cryptic</em></strong>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="names-are-for-clients-first">Names are for Clients First<a href="#names-are-for-clients-first" class="hash-link" aria-label="Direct link to Names are for Clients First" title="Direct link to Names are for Clients First">​</a></h4><p>Package and type names should be chosen for the benefit of users, not
necessarily because of legacy concerns related to the go code-base.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="plan-for-longevity">Plan for Longevity<a href="#plan-for-longevity" class="hash-link" aria-label="Direct link to Plan for Longevity" title="Direct link to Plan for Longevity">​</a></h4><p>In the interests of long-term support, we should plan on the names we do
choose to be in usage for a long time, so now is the opportunity to make
the best choices for the future.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="versioning">Versioning<a href="#versioning" class="hash-link" aria-label="Direct link to Versioning" title="Direct link to Versioning">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="guidelines-on-stable-package-versions">Guidelines on Stable Package Versions<a href="#guidelines-on-stable-package-versions" class="hash-link" aria-label="Direct link to Guidelines on Stable Package Versions" title="Direct link to Guidelines on Stable Package Versions">​</a></h4><p>In general, schema evolution is the way to update protobuf schemas. That means that new fields,
messages, and RPC methods are <em>added</em> to existing schemas and old fields, messages and RPC methods
are maintained as long as possible.</p><p>Breaking things is often unacceptable in a blockchain scenario. For instance, immutable smart contracts
may depend on certain data schemas on the host chain. If the host chain breaks those schemas, the smart
contract may be irreparably broken. Even when things can be fixed (for instance in client software),
this often comes at a high cost.</p><p>Instead of breaking things, we should make every effort to evolve schemas rather than just breaking them.
<a href="https://buf.build" target="_blank" rel="noopener noreferrer">Buf</a> breaking change detection should be used on all stable (non-alpha or beta) packages
to prevent such breakage.</p><p>With that in mind, different stable versions (i.e. <code>v1</code> or <code>v2</code>) of a package should more or less be considered
different packages and this should be last resort approach for upgrading protobuf schemas. Scenarios where creating
a <code>v2</code> may make sense are:</p><ul><li>we want to create a new module with similar functionality to an existing module and adding <code>v2</code> is the most natural
way to do this. In that case, there are really just two different, but similar modules with different APIs.</li><li>we want to add a new revamped API for an existing module and it&#x27;s just too cumbersome to add it to the existing package,
so putting it in <code>v2</code> is cleaner for users. In this case, care should be made to not deprecate support for
<code>v1</code> if it is actively used in immutable smart contracts.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="guidelines-on-unstable-alpha-and-beta-package-versions">Guidelines on unstable (alpha and beta) package versions<a href="#guidelines-on-unstable-alpha-and-beta-package-versions" class="hash-link" aria-label="Direct link to Guidelines on unstable (alpha and beta) package versions" title="Direct link to Guidelines on unstable (alpha and beta) package versions">​</a></h4><p>The following guidelines are recommended for marking packages as alpha or beta:</p><ul><li>marking something as <code>alpha</code> or <code>beta</code> should be a last resort and just putting something in the
stable package (i.e. <code>v1</code> or <code>v2</code>) should be preferred</li><li>a package <em>should</em> be marked as <code>alpha</code> <em>if and only if</em> there are active discussions to remove
or significantly alter the package in the near future</li><li>a package <em>should</em> be marked as <code>beta</code> <em>if and only if</em> there is an active discussion to
significantly refactor/rework the functionality in the near future but not remove it</li><li>modules <em>can and should</em> have types in both stable (i.e. <code>v1</code> or <code>v2</code>) and unstable (<code>alpha</code> or <code>beta</code>) packages.</li></ul><p><em><code>alpha</code> and <code>beta</code> should not be used to avoid responsibility for maintaining compatibility.</em>
Whenever code is released into the wild, especially on a blockchain, there is a high cost to changing things. In some
cases, for instance with immutable smart contracts, a breaking change may be impossible to fix.</p><p>When marking something as <code>alpha</code> or <code>beta</code>, maintainers should ask the questions:</p><ul><li>what is the cost of asking others to change their code vs the benefit of us maintaining the optionality to change it?</li><li>what is the plan for moving this to <code>v1</code> and how will that affect users?</li></ul><p><code>alpha</code> or <code>beta</code> should really be used to communicate &quot;changes are planned&quot;.</p><p>As a case study, gRPC reflection is in the package <code>grpc.reflection.v1alpha</code>. It hasn&#x27;t been changed since
2017 and it is now used in other widely used software like gRPCurl. Some folks probably use it in production services
and so if they actually went and changed the package to <code>grpc.reflection.v1</code>, some software would break and
they probably don&#x27;t want to do that... So now the <code>v1alpha</code> package is more or less the de-facto <code>v1</code>. Let&#x27;s not do that.</p><p>The following are guidelines for working with non-stable packages:</p><ul><li><a href="https://buf.build/docs/lint-checkers#package_version_suffix" target="_blank" rel="noopener noreferrer">Buf&#x27;s recommended version suffix</a>
(ex. <code>v1alpha1</code>) <em>should</em> be used for non-stable packages</li><li>non-stable packages should generally be excluded from breaking change detection</li><li>immutable smart contract modules (i.e. CosmWasm) <em>should</em> block smart contracts/persistent
scripts from interacting with <code>alpha</code>/<code>beta</code> packages</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="omit-v1-suffix">Omit v1 suffix<a href="#omit-v1-suffix" class="hash-link" aria-label="Direct link to Omit v1 suffix" title="Direct link to Omit v1 suffix">​</a></h4><p>Instead of using <a href="https://buf.build/docs/lint-checkers#package_version_suffix" target="_blank" rel="noopener noreferrer">Buf&#x27;s recommended version suffix</a>,
we can omit <code>v1</code> for packages that don&#x27;t actually have a second version. This
allows for more concise names for common use cases like <code>cosmos.bank.Send</code>.
Packages that do have a second or third version can indicate that with <code>.v2</code>
or <code>.v3</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="package-naming">Package Naming<a href="#package-naming" class="hash-link" aria-label="Direct link to Package Naming" title="Direct link to Package Naming">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="adopt-a-short-unique-top-level-package-name">Adopt a short, unique top-level package name<a href="#adopt-a-short-unique-top-level-package-name" class="hash-link" aria-label="Direct link to Adopt a short, unique top-level package name" title="Direct link to Adopt a short, unique top-level package name">​</a></h4><p>Top-level packages should adopt a short name that is known to not collide with
other names in common usage within the Cosmos ecosystem. In the near future, a
registry should be created to reserve and index top-level package names used
within the Cosmos ecosystem. Because the Cosmos SDK is intended to provide
the top-level types for the Cosmos project, the top-level package name <code>cosmos</code>
is recommended for usage within the Cosmos SDK instead of the longer <code>cosmos_sdk</code>.
<a href="https://github.com/cosmos/ics" target="_blank" rel="noopener noreferrer">ICS</a> specifications could consider a
short top-level package like <code>ics23</code> based upon the standard number.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="limit-sub-package-depth">Limit sub-package depth<a href="#limit-sub-package-depth" class="hash-link" aria-label="Direct link to Limit sub-package depth" title="Direct link to Limit sub-package depth">​</a></h4><p>Sub-package depth should be increased with caution. Generally a single
sub-package is needed for a module or a library. Even though <code>x</code> or <code>modules</code>
is used in source code to denote modules, this is often unnecessary for .proto
files as modules are the primary thing sub-packages are used for. Only items which
are known to be used infrequently should have deep sub-package depths.</p><p>For the Cosmos SDK, it is recommended that we simply write <code>cosmos.bank</code>,
<code>cosmos.gov</code>, etc. rather than <code>cosmos.x.bank</code>. In practice, most non-module
types can go straight in the <code>cosmos</code> package or we can introduce a
<code>cosmos.base</code> package if needed. Note that this naming <em>will not</em> change
go package names, i.e. the <code>cosmos.bank</code> protobuf package will still live in
<code>x/bank</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="message-naming">Message Naming<a href="#message-naming" class="hash-link" aria-label="Direct link to Message Naming" title="Direct link to Message Naming">​</a></h3><p>Message type names should be as concise possible without losing clarity. <code>sdk.Msg</code>
types which are used in transactions will retain the <code>Msg</code> prefix as that provides
helpful context.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="service-and-rpc-naming">Service and RPC Naming<a href="#service-and-rpc-naming" class="hash-link" aria-label="Direct link to Service and RPC Naming" title="Direct link to Service and RPC Naming">​</a></h3><p><a href="/dev-portal-docsite/cosmos-sdk/next/docs/architecture/adr-021-protobuf-query-encoding">ADR 021</a> specifies that modules should
implement a gRPC query service. We should consider the principle of conciseness
for query service and RPC names as these may be called from persistent script
modules such as CosmWasm. Also, users may use these query paths from tools like
<a href="https://github.com/fullstorydev/grpcurl" target="_blank" rel="noopener noreferrer">gRPCurl</a>. As an example, we can shorten
<code>/cosmos_sdk.x.bank.v1.QueryService/QueryBalance</code> to
<code>/cosmos.bank.Query/Balance</code> without losing much useful information.</p><p>RPC request and response types <em>should</em> follow the <code>ServiceNameMethodNameRequest</code>/
<code>ServiceNameMethodNameResponse</code> naming convention. i.e. for an RPC method named <code>Balance</code>
on the <code>Query</code> service, the request and response types would be <code>QueryBalanceRequest</code>
and <code>QueryBalanceResponse</code>. This will be more self-explanatory than <code>BalanceRequest</code>
and <code>BalanceResponse</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="use-just-query-for-the-query-service">Use just <code>Query</code> for the query service<a href="#use-just-query-for-the-query-service" class="hash-link" aria-label="Direct link to use-just-query-for-the-query-service" title="Direct link to use-just-query-for-the-query-service">​</a></h4><p>Instead of <a href="https://github.com/cosmos/cosmos-sdk/pull/6033" target="_blank" rel="noopener noreferrer">Buf&#x27;s default service suffix recommendation</a>,
we should simply use the shorter <code>Query</code> for query services.</p><p>For other types of gRPC services, we should consider sticking with Buf&#x27;s
default recommendation.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="omit-get-and-query-from-query-service-rpc-names">Omit <code>Get</code> and <code>Query</code> from query service RPC names<a href="#omit-get-and-query-from-query-service-rpc-names" class="hash-link" aria-label="Direct link to omit-get-and-query-from-query-service-rpc-names" title="Direct link to omit-get-and-query-from-query-service-rpc-names">​</a></h4><p><code>Get</code> and <code>Query</code> should be omitted from <code>Query</code> service names because they are
redundant in the fully-qualified name. For instance, <code>/cosmos.bank.Query/QueryBalance</code>
just says <code>Query</code> twice without any new information.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="future-improvements">Future Improvements<a href="#future-improvements" class="hash-link" aria-label="Direct link to Future Improvements" title="Direct link to Future Improvements">​</a></h2><p>A registry of top-level package names should be created to coordinate naming
across the ecosystem, prevent collisions, and also help developers discover
useful schemas. A simple starting point would be a git repository with
community-based governance.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="consequences">Consequences<a href="#consequences" class="hash-link" aria-label="Direct link to Consequences" title="Direct link to Consequences">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="positive">Positive<a href="#positive" class="hash-link" aria-label="Direct link to Positive" title="Direct link to Positive">​</a></h3><ul><li>names will be more concise and easier to read and type</li><li>all transactions using <code>Any</code> will be at shorter (<code>_sdk.x</code> and <code>.v1</code> will be removed)</li><li><code>.proto</code> file imports will be more standard (without <code>&quot;third_party/proto&quot;</code> in
the path)</li><li>code generation will be easier for clients because .proto files will be
in a single <code>proto/</code> directory which can be copied rather than scattered
throughout the Cosmos SDK</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="negative">Negative<a href="#negative" class="hash-link" aria-label="Direct link to Negative" title="Direct link to Negative">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="neutral">Neutral<a href="#neutral" class="hash-link" aria-label="Direct link to Neutral" title="Direct link to Neutral">​</a></h3><ul><li><code>.proto</code>  files will need to be reorganized and refactored</li><li>some modules may need to be marked as alpha or beta</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#changelog" class="table-of-contents__link toc-highlight">Changelog</a></li><li><a href="#status" class="table-of-contents__link toc-highlight">Status</a></li><li><a href="#context" class="table-of-contents__link toc-highlight">Context</a><ul><li><a href="#adoption-of-any" class="table-of-contents__link toc-highlight">Adoption of <code>Any</code></a></li><li><a href="#current-directory-organization" class="table-of-contents__link toc-highlight">Current Directory Organization</a></li><li><a href="#adoption-of-grpc-queries" class="table-of-contents__link toc-highlight">Adoption of gRPC Queries</a></li></ul></li><li><a href="#decision" class="table-of-contents__link toc-highlight">Decision</a><ul><li><a href="#principles" class="table-of-contents__link toc-highlight">Principles</a></li><li><a href="#versioning" class="table-of-contents__link toc-highlight">Versioning</a></li><li><a href="#package-naming" class="table-of-contents__link toc-highlight">Package Naming</a></li><li><a href="#message-naming" class="table-of-contents__link toc-highlight">Message Naming</a></li><li><a href="#service-and-rpc-naming" class="table-of-contents__link toc-highlight">Service and RPC Naming</a></li></ul></li><li><a href="#future-improvements" class="table-of-contents__link toc-highlight">Future Improvements</a></li><li><a href="#consequences" class="table-of-contents__link toc-highlight">Consequences</a><ul><li><a href="#positive" class="table-of-contents__link toc-highlight">Positive</a></li><li><a href="#negative" class="table-of-contents__link toc-highlight">Negative</a></li><li><a href="#neutral" class="table-of-contents__link toc-highlight">Neutral</a></li></ul></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"></ul></div><div class="col footer__col"><div class="footer__title">Stack Components</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/cosmos/ibc-go" target="_blank" rel="noopener noreferrer" class="footer__link-item">IBC-Go<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/cosmos/cosmos-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">CosmosSDK<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/cometbft/cometbft" target="_blank" rel="noopener noreferrer" class="footer__link-item">CometBFT<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/CosmWasm/cosmwasm" target="_blank" rel="noopener noreferrer" class="footer__link-item">CosmWasm<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/cosmos/relayer" target="_blank" rel="noopener noreferrer" class="footer__link-item">Go Relayer<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://hermes.informal.systems/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Hermes Relayer<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/cosmos/ibc-rs" target="_blank" rel="noopener noreferrer" class="footer__link-item">IBC-rs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/strangelove-ventures/interchaintest" target="_blank" rel="noopener noreferrer" class="footer__link-item">Interchaintest<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.com/invite/interchain" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/interchain_io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@interchain_io" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://interchain.io/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2025 <a href="https://interchain.io/">Interchain Foundation</a>. All rights reserved.</div></div></div></footer></div>
<script src="/dev-portal-docsite/assets/js/runtime~main.e260afe7.js"></script>
<script src="/dev-portal-docsite/assets/js/main.175a359f.js"></script>
</body>
</html>